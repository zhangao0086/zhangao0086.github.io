---
layout: post
redirect_from: /2021/01/06/evaluable_workflow/
title: "建立可评估工作流"
date: 2021-01-06 20:29:46 +0800
categories: [分享]
article_type: 1
typora-root-url: ../../github.io
---

这是建立可评估架构的第一步。


受《演进式架构》的影响，重新思考了如何做好质量保障这件事：

- 质量是所有人都关心的事
- 质量怎么衡量？不同团队考察的维度不同，不限于性能、可靠性、安全性、可操作性和可维护性
- 无论是代码质量还是交付质量，没有数据（监控）和防劣化的策略，是无法保障的
- 要关注更抽象的战略目标和端到端的特性价值

为了能更客观的度量架构，我们想用第三方视角来评估它，于是我们开始考虑将**可评估性**也作为架构设计的考虑维度之一，并以此在不同设计模式之间做出权衡。

此外还需要有一个工作流去执行各种度量函数，我们在 CI 中设计了一个简单的流程：

>  ![](/assets/img/evaluable_workflow-1.png)

这一步先用适应度函数（也可以叫度量函数）统一大家的概念，适应度函数本身基于 Python 的技术栈，生态丰富，学习成本低，每个人都能实现自己的度量函数。

> ![](/assets/img/evaluable_workflow-2.png)

基于 `requirements.txt` 创建和重用环境，使各函数的执行在隔离的物理环境中。

> ![](/assets/img/evaluable_workflow-3.png)

最后再引入一个基本的防劣化策略就是一个简易能落地的评估工作流了。

如本文第一句所说，这是建立可评估架构的第一步，先有一个能跑起来的简单模型，再通过这个模型和架构对话，根据数据做关键权衡（如“提高阈值”还是“适应需求”），而为了能让所有人参与进来，我们建立了一个适应度函数管理平台去支持自定义策略，以实现架构共建。
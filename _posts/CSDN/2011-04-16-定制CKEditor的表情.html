---
layout: post
title: '定制CKEditor的表情'
date: 2011-04-16 14:08:00 +0800
categories: [Java]
csdn_read_num: 10979
article_type: 1
---


<p>可以通过直接修改CKEditor的config.js文件来配置CKEditor,官方提供了很详细的API.</p><blockquote><p>config.smiley_columns = 8</p></blockquote><p>指定表情的显示的列数,默认为8.</p><p>表情图片的默认地址在ckeditor/plugins/smiley/images/目录下,可以直接放进来,也可以用CKEDITOR.config.smiley_path属性指定图片的地址.</p><p>把要使用到的图片用config.smiley_images属性指定名称,比如把名称为1到5的gif格式的图片纳入CKEditor:</p><div id="codeSnippetWrapper" style="text-align: left; line-height: 12pt; background-color: #f4f4f4; margin: 20px 0px 10px; width: 99%; font-family: 'Courier New', courier, monospace; direction: ltr; font-size: 10pt; overflow: auto; cursor: text; border: silver 1px solid; padding: 4px;"><div id="codeSnippet" style="text-align: left; line-height: 12pt; background-color: #f4f4f4; width: 100%; font-family: 'Courier New', courier, monospace; direction: ltr; color: black; font-size: 10pt; overflow: visible; border-style: none; padding: 0px;"><pre style="text-align: left; line-height: 12pt; background-color: white; margin: 0em; width: 100%; font-family: 'Courier New', courier, monospace; direction: ltr; color: black; font-size: 10pt; overflow: visible; border-style: none; padding: 0px;">config.smiley_images = [</pre><!--CRLF--><pre style="text-align: left; line-height: 12pt; background-color: #f4f4f4; margin: 0em; width: 100%; font-family: 'Courier New', courier, monospace; direction: ltr; color: black; font-size: 10pt; overflow: visible; border-style: none; padding: 0px;">        '0.gif','1.gif','2.gif','3.gif','4.gif','5.gif'</pre><!--CRLF--><pre style="text-align: left; line-height: 12pt; background-color: white; margin: 0em; width: 100%; font-family: 'Courier New', courier, monospace; direction: ltr; color: black; font-size: 10pt; overflow: visible; border-style: none; padding: 0px;">    ]</pre><!--CRLF--></div></div><p>鼠标指上去后显示的提示用config.smiley_descriptions属性指定,比如:</p><div id="codeSnippetWrapper" style="text-align: left; line-height: 12pt; background-color: #f4f4f4; margin: 20px 0px 10px; width: 99%; font-family: 'Courier New', courier, monospace; direction: ltr; font-size: 10pt; overflow: auto; cursor: text; border: silver 1px solid; padding: 4px;"><div id="codeSnippet" style="text-align: left; line-height: 12pt; background-color: #f4f4f4; width: 100%; font-family: 'Courier New', courier, monospace; direction: ltr; color: black; font-size: 10pt; overflow: visible; border-style: none; padding: 0px;"><pre style="text-align: left; line-height: 12pt; background-color: white; margin: 0em; width: 100%; font-family: 'Courier New', courier, monospace; direction: ltr; color: black; font-size: 10pt; overflow: visible; border-style: none; padding: 0px;">config.smiley_descriptions = [</pre><!--CRLF--><pre style="text-align: left; line-height: 12pt; background-color: #f4f4f4; margin: 0em; width: 100%; font-family: 'Courier New', courier, monospace; direction: ltr; color: black; font-size: 10pt; overflow: visible; border-style: none; padding: 0px;">    '0','1','2','3','4','5'</pre><!--CRLF--><pre style="text-align: left; line-height: 12pt; background-color: white; margin: 0em; width: 100%; font-family: 'Courier New', courier, monospace; direction: ltr; color: black; font-size: 10pt; overflow: visible; border-style: none; padding: 0px;">]</pre><!--CRLF--></div></div><p>如果表情过多的话,默认是不会有滚动条的,在FCKEditor里面可以找到弹出的页面,然后进行修改,CKEditor是显示一个层,默认是隐藏的,每个皮肤都对应不同的样式,如果我现在在使用v2的皮肤,就要先到ckeditor/skins/v2/目录下,找到dialog.css,这是压缩后的css文件,在里面找起来很不方便,可以先到源码下的目录,ckeditor/_source/skins/v2/,打开dialog.css,通过查看可以发现在cke_dialog_body的样式就是我们需要修改的,然后通过搜索在压缩文件里面找到相应的样式,加入:</p><div id="codeSnippetWrapper" style="text-align: left; line-height: 12pt; background-color: #f4f4f4; margin: 20px 0px 10px; width: 99%; font-family: 'Courier New', courier, monospace; direction: ltr; font-size: 10pt; overflow: auto; cursor: text; border: silver 1px solid; padding: 4px;"><div id="codeSnippet" style="text-align: left; line-height: 12pt; background-color: #f4f4f4; width: 100%; font-family: 'Courier New', courier, monospace; direction: ltr; color: black; font-size: 10pt; overflow: visible; border-style: none; padding: 0px;"><pre style="text-align: left; line-height: 12pt; background-color: white; margin: 0em; width: 100%; font-family: 'Courier New', courier, monospace; direction: ltr; color: black; font-size: 10pt; overflow: visible; border-style: none; padding: 0px;"><span style="color: #0000ff">overflow</span>:<span style="color: #006080">auto;</span><span style="color: #0000ff">max-height</span>:<span style="color: #006080">300px;</span></pre><!--CRLF--></div></div><p>就可以了,我在只添加overflow之后,发现页面中还是把层的高度增大,而没有把页面的高度拉大,下面以图来说明问题.</p><p>不添加overflow和max-height样式:</p><p><a target=_blank href="https://hi.csdn.net/attachment/201104/16/0_1302934083y2Z1.gif"><img style="background-image: none; border-bottom: 0px; border-left: 0px; padding-left: 0px; padding-right: 0px; display: inline; border-top: 0px; border-right: 0px; padding-top: 0px" title="image" src="https://hi.csdn.net/attachment/201104/16/0_1302934085u871.gif" border="0" alt="image" width="351" height="233" /></a></p><p>可能会出现类似的溢出.也可能会这样显示不完整:</p><p><a target=_blank href="https://hi.csdn.net/attachment/201104/16/0_130293409009f3.gif"><img style="background-image: none; border-bottom: 0px; border-left: 0px; padding-left: 0px; padding-right: 0px; display: inline; border-top: 0px; border-right: 0px; padding-top: 0px" title="image" src="https://hi.csdn.net/attachment/201104/16/0_1302934092z7C7.gif" border="0" alt="image" width="346" height="267" /></a></p><p>只添加overflow样式:</p><p><a target=_blank href="https://hi.csdn.net/attachment/201104/16/0_1302934097nIAo.gif"><img style="background-image: none; border-bottom: 0px; border-left: 0px; padding-left: 0px; padding-right: 0px; display: inline; border-top: 0px; border-right: 0px; padding-top: 0px" title="image" src="https://hi.csdn.net/attachment/201104/16/0_1302934098JQZO.gif" border="0" alt="image" width="348" height="277" /></a></p><p>还是会显示不完整,而且也没有滚动条,我想的解释就是这个层还是把图片全都加进来了,但是层会随着浏览器的滚动条而改变Y坐标,所以后面的还是看不到.</p><p>全部加上后:</p><p><a target=_blank href="https://hi.csdn.net/attachment/201104/16/0_1302934100w7M7.gif"><img style="background-image: none; border-bottom: 0px; border-left: 0px; padding-left: 0px; padding-right: 0px; display: inline; border-top: 0px; border-right: 0px; padding-top: 0px" title="image" src="https://hi.csdn.net/attachment/201104/16/0_1302934102NnSE.gif" border="0" alt="image" width="415" height="209" /></a></p><p>如果各位发现浏览器之间不兼容,还是需要找兼容性的样式.</p>
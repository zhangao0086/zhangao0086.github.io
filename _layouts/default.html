<!DOCTYPE html>
<html lang="{{ site.lang | default: "en-US" }}">
  <head>
    {% if site.google_analytics %}
      <script async src="https://www.googletagmanager.com/gtag/js?id={{ site.google_analytics }}"></script>
      <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        gtag('config', '{{ site.google_analytics }}');
      </script>
    {% endif %}
    <meta charset="UTF-8">
    <link rel="icon" type="image/png" href="{{ site.github.url | append: '/favicon.png' }}"/>
{% seo %}
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="theme-color" content="#157878">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
    <link rel="stylesheet" href="{{ '/css/sidebar.css?v=' | append: site.github.build_revision | relative_url }}" />
    <link rel="stylesheet" href="{{ '/css/style.css?v=' | append: site.github.build_revision | relative_url }}" />
    <link rel="stylesheet" href="{{ '/css/dropdown.css?v=' | append: site.github.build_revision | relative_url }}" />
    <link rel="stylesheet" href="{{ '/css/fontawesome.min.css?v=' | append: site.github.build_revision | relative_url }}" />
    <link rel="stylesheet" href="{{ '/css/brands.min.css?v=' | append: site.github.build_revision | relative_url }}" />
    <link rel="stylesheet" href="{{ '/css/solid.min.css?v=' | append: site.github.build_revision | relative_url }}" />
  </head>
  <body>
    {% include sidebar.html %}

    <div class="wrap">
      <nav class="navbar">
        {% if page.layout == "post" %}
          <ul class="left">
            <li><a href="javascript:window.history.back()"><i class="fas fa-angle-left"></i></a></li>
          </ul>
        {% endif %}
        <ul class="right">
          <!-- <li><a href="{{ site.github.url | append: '/README.html' }}">Categories</a></li> -->
          <!-- <li><a href="{{ site.github.url | append: '/README.html' }}">什么是 ARTS？</a></li> -->
          <li><i class="fas fa-bars sidebar-toggle" for="sidebar-checkbox"></i></li>
        </ul>
      </nav>
      <!-- <nav class="right">

        <details class="dropdown details-reset details-overlay">
          <summary>
            <i class="fas fa-bars"></i>
          </summary>
      
          <ul class="dropdown-menu dropdown-menu-sw">
            <li><a class="dropdown-item" href="{{ site.github.url | append: '/README.html' }}">什么是 ARTS？</a></li>
          </ul>
        </details>
      </nav> -->
    
      <header class="page-header" role="banner">
        <h1 class="project-name">{{ page.title | default: site.title | default: site.github.repository_name }}</h1>
  
        {% if page.date %}
          <middle>{{ page.date | date: "%Y-%m-%d %H:%M:%S"}}<i class="fas fa-circle circle-divider"></i>{% include reading_time.html content = content %}</middle>
        {% endif %}
        <!-- <img src="http://stackoverflow.com/users/flair/907422.png?theme=clean" width="208" height="58" alt="profile for Bannings at Stack Overflow, Q&amp;A for professional and enthusiast programmers" title="profile for Bannings at Stack Overflow, Q&amp;A for professional and enthusiast programmers"> -->
      </header>
      {% include floating_header.html %}
      <main class="container main-content" role="main">
        {{ content }}
        <footer class="site-footer">
          <span>&copy; {{ site.time | date: '%Y' }} <i class="fas fa-heart"></i> {{ site.author.name }}.</span>
          <!-- <span class="site-footer-owner"><a href="{{ site.github.url }}">{{ site.title }}</a> is maintained by <a href="{{ site.github.owner_url }}">{{ site.github.owner_name }}</a>.</span> -->
          <span class="site-footer-credits">This page was generated by <a href="https://pages.github.com">GitHub Pages</a>.</span>
        </footer>
      </main>
    </div>
  </body>
</html>

<script>
    (function(document) {
      const toggle = document.querySelector('.sidebar-toggle');
      const sidebar = document.querySelector('#sidebar');
      const checkbox = document.querySelector('#sidebar-checkbox');
      const overlay = document.getElementById('sidebar-overlay');
      
      const sendChangeEvent = () => {
          const event = document.createEvent("HTMLEvents");
          event.initEvent('change', false, true);
          checkbox.dispatchEvent(event);
      };

      const handler = (e) => {
        var target = e.target;

        let checked = true;
        if (target === toggle) {
          checked = !checkbox.checked;
          // e.preventDefault();
        } else if (target === overlay) {
          checked = false;
          // e.preventDefault();
        } else {
          return;
        }

        if (checkbox.checked != checked) {
          checkbox.checked = checked;
          sendChangeEvent();
        }
      };

      document.addEventListener('click', handler, false);
      document.addEventListener('touchstart', handler, false);

      if (checkbox.checked) { // 默认选中的状态
        if (!overlay.classList.contains('sidebar-overlay-display-show')) { // 蒙版没有显示，可以是由于浏览器 back 了
          sendChangeEvent();
        }
      }
    })(document);
  </script>
